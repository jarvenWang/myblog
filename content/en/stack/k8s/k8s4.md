---
author: "Karson"
title: "k8så®è·µä¸æ€»ç»“-2(èµ„æºä¸å±æ€§)"
date: 2023-06-23
description: "k8så®è·µä¸æ€»ç»“(èµ„æºä¸å±æ€§)"
draft: false
hideToc: false
enableToc: true
enableTocContent: false
author: Karson
authorEmoji: ğŸ‘»
tags:
- k8s
categories:
- k8s
---
##  èµ„æºåˆ†ç±»
### åç§°ç©ºé—´çº§åˆ«ï¼š
å¦‚ï¼škube-systemã€k3s
#### 1.å·¥ä½œè´Ÿè½½å‹èµ„æºï¼š
pod ã€replicaSet ã€Deployment ã€statefulSet ã€daemonSet ã€job ã€cronJob
#### 2.æœåŠ¡å‘ç°åŠè´Ÿè½½å‡è¡¡å‹èµ„æºï¼š
Service ã€Ingressã€
#### 3.é…ç½®ä¸å­˜å‚¨å‹èµ„æºï¼š
volumeï¼ˆå­˜å‚¨å·ï¼‰ã€CSIï¼ˆå®¹å™¨å­˜å‚¨æ¥å£ï¼Œå¯æ‰©å±•å„ç§ä¸‰æ–¹å­˜å‚¨å·ï¼‰
#### 4.ç‰¹æ®Šç±»å‹çš„å­˜å‚¨å·ï¼š
configMapï¼ˆå½“é…ç½®ä¸­å¿ƒæ¥ä½¿ç”¨çš„èµ„æºç±»å‹ï¼‰ã€Secretï¼ˆä¿å­˜æ•æ„Ÿæ•°æ®ï¼‰ã€DownwardAPI(æŠŠå¤–éƒ¨ç¯å¢ƒä¸­çš„ä¿¡æ¯è¾“å‡ºç»™å®¹å™¨)
#### 5.é›†ç¾¤çº§èµ„æºï¼š
Namespaceã€Nodeã€Roleã€ClusterRoleã€RoleBindingã€ClusterRoleBinding
#### 6.å…ƒæ•°æ®å‹èµ„æºï¼š
HPA ã€PodTemplate ã€ LimitRange


### é›†ç¾¤çº§åˆ«ï¼š
role
### å…ƒæ•°æ®å‹ï¼š
HPA(å¹³æ»‘æ‰©å±•)

## yamlå±æ€§
### version
string ç±»å‹
æ˜¯K8S APIçš„ç‰ˆæœ¬ã€‚åŸºæœ¬ä¸º v1 (å¯kubectl api-versionså‘½ä»¤æŸ¥çœ‹)
### kind
string ç±»å‹
æ˜¯yamlæ–‡ä»¶å®šä¹‰çš„èµ„æºç±»å‹å’Œè§’è‰²ï¼Œæ¯”å¦‚ï¼šDeploymentï¼ŒPod,Service
### metadata
Object ç±»å‹
å…ƒæ•°æ®å¯¹è±¡ï¼Œå›ºå®šå€¼å°±å†™metadata
#### metadata.name
string ç±»å‹
å…ƒæ•°æ®å¯¹è±¡çš„åå­—ï¼Œè‡ªç”±ç¼–å†™ï¼Œå¦‚ï¼špodçš„åå­—
#### metadata.namespace
string ç±»å‹
å…ƒæ•°æ®å¯¹è±¡çš„å‘½åç©ºé—´ï¼Œè‡ªç”±ç¼–å†™

### spec 
Object ç±»å‹
å­—ä¹‰å¯¹è±¡è§„åˆ™ï¼Œå›ºå®šå€¼spec
#### spec.containers[]
list ç±»å‹
specå¯¹è±¡çš„å®¹å™¨åˆ—è¡¨å®šä¹‰ï¼Œæ˜¯ä¸ªåˆ—è¡¨
#### spec.containers[].name
string ç±»å‹
å®¹å™¨çš„åå­—
#### spec.containers[].image
string ç±»å‹
å®¹å™¨çš„é•œåƒåç§°
#### spec.containers[].imagePullPolicy
string ç±»å‹
é•œåƒçš„æ‹‰å–ç­–ç•¥ï¼Œæœ‰ä¸‰ä¸ªé€‰é¡¹ï¼š
1. Always: æ¯æ¬¡éƒ½å°è¯•é‡æ–°æ‹‰å–é•œåƒ
2. Never: ä»…ä½¿ç”¨æœ¬åœ°é•œåƒ
3. IfNotPresent: å¦‚æœæœ¬æœ‰åˆ™ç”¨ï¼Œæ²¡æœ‰åœ¨çº¿æ‹‰

#### spec.containers[].command[]
list ç±»å‹
å®¹å™¨å¯åŠ¨å‘½ä»¤ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå‘½ä»¤ã€‚

#### spec.containers[].args[]
list ç±»å‹
å®¹å™¨å¯åŠ¨å‘½ä»¤å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ª

#### spec.containers[].workingDir
string ç±»å‹
å®¹å™¨çš„å·¥ä½œç›®å½•

#### spec.containers[].volumeMounts[]
list ç±»å‹
å®¹å™¨å†…éƒ¨çš„æŒ‚è½½å­˜å‚¨å·é…ç½®

#### spec.containers[].volumeMounts[].name
string ç±»å‹
æŒ‡å®šå­˜æŒ‚è½½å‚¨å·çš„åç§°

#### spec.containers[].volumeMounts[].mountPath
string ç±»å‹
æŒ‡å®šå­˜æŒ‚è½½å‚¨å·çš„è·¯å¾„

#### spec.containers[].volumeMounts[].readOnly
string ç±»å‹
æŒ‡å®šå­˜æŒ‚è½½å‚¨å·çš„è·¯å¾„çš„è¯»å†™æ¨¡å¼ï¼Œture æˆ– falseï¼Œé»˜è®¤ä¸ºè¯»å†™æ¨¡å¼

#### spec.containers[].ports[]
list ç±»å‹
çª—å£éœ€è¦ç”¨åˆ°çš„ç«¯å£åˆ—è¡¨

#### spec.containers[].ports[].name
string ç±»å‹
ç«¯å£åç§°

#### spec.containers[].ports[].containerPort
string ç±»å‹
å®¹å™¨éœ€è¦ç›‘å¬çš„ç«¯å£å·

#### spec.containers[].ports[].hostPort
string ç±»å‹
å®¹å™¨æ‰€åœ¨ä¸»æœºéœ€è¦ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸containerPortç›¸åŒï¼Œå¦‚æœè®¾ç½®äº†hostPortåŒä¸€å°ä¸»æœºæ— æ³•å¯åŠ¨è¯¥å®¹å™¨çš„ç›¸åŒå‰¯æœ¬ï¼Œå› ä¸ºç«¯å£å·ç›¸åŒå†²çªäº†

#### spec.containers[].ports[].protocol
string ç±»å‹
ç«¯å£åè®®ï¼Œæ”¯æŒTCPå’ŒUDPï¼Œé»˜è®¤TCP

#### spec.containers[].env[]
list ç±»å‹
å®¹å™¨è¿è¡Œå‰è®¾ç½®çš„ç¯å¢ƒå˜é‡åˆ—è¡¨

#### spec.containers[].env[].name
list ç±»å‹
ç¯å¢ƒå˜é‡åç§°

#### spec.containers[].env[].value
list ç±»å‹
ç¯å¢ƒå˜é‡å€¼

#### spec.containers[].resources
Object ç±»å‹
èµ„æºé™åˆ¶å’Œèµ„æºè¯·æ±‚çš„å€¼

#### spec.containers[].resources.limits
Object ç±»å‹
å®¹å™¨è¿è¡Œæ—¶èµ„æºçš„è¿è¡Œä¸Šé™

#### spec.containers[].resources.limits.cpu
string ç±»å‹
CPUçš„é™åˆ¶ï¼Œå•ä½ä¸ºcoreä¸ªæ•°

#### spec.containers[].resources.limits.memory
string ç±»å‹
MEMå†…å­˜çš„é™åˆ¶ï¼Œå•ä½ä¸ºMIB/GIB

#### spec.containers[].resources.requests 
Object ç±»å‹
å®¹å™¨å¯åŠ¨å’Œè°ƒåº¦æ—¶çš„é™åˆ¶è®¾ç½®

#### spec.containers[].resources.requests.cpu
string ç±»å‹
CPUè¯·æ±‚ï¼Œå•ä½ä¸ºcoreæ•°ï¼Œå®¹å™¨å¯åŠ¨æ—¶åˆå§‹åŒ–å¯ç”¨æ•°é‡

#### spec.containers[].resources.requests.memory
string ç±»å‹
å†…å­˜è¯·æ±‚ï¼Œå•ä½ä¸ºMIB/GIBï¼Œå®¹å™¨å¯åŠ¨çš„åˆå§‹åŒ–å¯ç”¨æ•°é‡

#### spec.restartPolicy
string ç±»å‹
podçš„é‡å¯ç­–ç•¥ï¼Œå¯é€‰å€¼ä¸ºAlwaysã€OnFailure,é»˜è®¤å€¼ä¸ºAlwaysã€‚
1. Alwaysï¼š æ— è®ºå®¹å™¨æ˜¯å¦‚ä½•ç»ˆæ­¢çš„ï¼Œéƒ½å°†é‡å¯
2. OnFailure: åªé0é€€å‡ºç ç»ˆæ­¢æ—¶ï¼Œæ‰é‡å¯
3. Never: ç»ˆæ­¢åä¸é‡å¯

#### spec.nodeSelector
Object ç±»å‹
å®šä¹‰Nodeçš„Labelè¿‡æ»¤æ ‡ç­¾ï¼Œä»¥ `key:value` æ ¼å¼æŒ‡å®š

#### spec.imagePullSecrets
Object ç±»å‹
å®šä¹‰pullé•œåƒæ—¶ä½¿ç”¨secretåç§°ï¼Œä»¥ `name:secretkey` æ ¼å¼æŒ‡å®š

#### spec.hostNetwork
Boolean ç±»å‹
å®šä¹‰æ˜¯å¦ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ï¼Œé»˜è®¤å€¼ä¸º false.è®¾ç½®true ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œï¼Œä¸ä½¿ç”¨dockerç½‘æ¡¥ï¼ŒåŒæ—¶æ— æ³•å¯åŠ¨ç¬¬äºŒä¸ªå‰¯æœ¬ã€‚